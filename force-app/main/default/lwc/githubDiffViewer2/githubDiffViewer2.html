<!--
 - Created by mp1863 on 22/03/25.
 -->

<!-- Github Diff Viewer 2 -->
<template>
    <lightning-card title="GitHub File Diffs" icon-name="custom:custom63">
        <template if:true={files.length}>
            <ul class="slds-list_dotted slds-m-around_medium">
                <template for:each={files} for:item="file">
                    <li key={file.filename}>
                        <a href="javascript:void(0);" class="file-link" data-id={file.filename} onclick={openModal}>{file.filename}</a>
                    </li>
                </template>
            </ul>
        </template>

        <template if:true={showModal}>
            <section role="dialog" class="slds-modal slds-fade-in-open github-modal">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <h2 class="slds-text-heading_medium">{selectedFileName}</h2>
                    </header>
                    <div class="slds-modal__content slds-p-around_medium modal-scroll">
                        <template for:each={parsedLines} for:item="line">
                            <div key={line.key} class={line.className}>
                                <pre>{line.content}</pre>
                            </div>
                        </template>
                    </div>
                    <footer class="slds-modal__footer">
                        <lightning-button variant="neutral" label="Close" onclick={closeModal}></lightning-button>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>
    </lightning-card>
</template>
